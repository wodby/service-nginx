name: nginx
type: service
icon: nginx
title: Nginx
scalable: true
hostname: nginx

options:
- version: '1.21'
  default: true
- version: '1.20'

containers:
- name: nginx
  image: wodby/nginx
  ports:
  - name: http
    number: 80
    type: http
    main: true
    
labels:
- nginx

build:
  connect: true
  templates:
  - name: nextjs
    title: Next.js
    repo: https://github.com/wodby/nextjs
    branch: main

settings:
- name: docroot
  title: Nginx docroot subdir
  var: DOCROOT_SUBDIR

configs:
- name: main config
  path: /etc/nginx/nginx.conf
- name: preset config
  path: /etc/nginx/preset.conf
- name: upstream config
  path: /etc/nginx/upstream.conf
- name: 50x error
  path: /usr/share/nginx/html/50x.html


env:
- name: NGINX_SERVER_ROOT
  value: /var/www/html/$(DOCROOT_SUBDIR)
