name: nginx
type: service
icon: nginx
title: Nginx
scalable: true
hostname: nginx

options:
- version: '1.25'
  default: true

containers:
- name: nginx
  image: wodby/nginx
  ports:
  - name: http
    number: 80
    type: http
    main: true
  env:
  - name: DISABLE_WELCOME_MESSAGE
    value: 'true'

labels:
- nginx

build:
  connect: true
  templates:
  - name: nextjs
    title: Next.js
    repo: https://github.com/wodby/nextjs
    branch: main

settings:
- name: docroot
  title: Nginx docroot subdir
  var: DOCROOT_SUBDIR

configs:
- name: main
  title: Server block config
  helm: serverBlock
  config: ""

env:
- name: NGINX_SERVER_ROOT
  value: /var/www/html/$(DOCROOT_SUBDIR)

helm:
  name: bitnami
  source: oci://registry-1.docker.io/bitnamicharts/nginx
  chart: oci://registry-1.docker.io/bitnamicharts/nginx
  version: 16.0.5
  configurations:
  - name: nginx
    labels: commonLabels
    annotations: commonAnnotations
    env: extraEnvVars
    resources: resources
    ingresses: 
    - name: common
      service: '{{service.name}}'
  values:
  - name: resourcesPreset
    value: 'none'

